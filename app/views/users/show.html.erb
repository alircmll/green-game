<section id="user" class="container-fluid d-flex flex-column bg-dark justify-content-center">
  <%= render 'shared/topnav' %>
  <section id="userStatus" class="row px-4">
    <div class="col-10 offset-1  d-flex align-items-center  justify-content-between">
      <!-- Use any element to open the sidenav -->
      <%= cl_image_tag @user.photo, class: "avatar p-1" %>
      <p class= "name text-white"><%= @user.username.capitalize %></p>
    </div>
    <div class="col-10 offset-1 d-flex align-items-center justify-content-between text-white mt-3 ">
      <%#  Incrementer avec les paliers le niveau %>
      <span id="myLevel">Lvl. <%= @user.level %></span>
      <%# Changer le pourcentage en focntion de la progress bar  %>
      <span id="nextLevelIn"><%= @user.total_point %>%</span>
    </div>
    <%# raise %>
    <div class="col-10 offset-1  ">
      <%# PROGRESS BAR, Changer style pourcantage avec width et aria-valuenow %>
      <div class="progress">
        <div class="progress-bar bg-primary" role="progressbar" style="width: <%= @user.total_point %>%;"
            aria-valuenow="<%= @user.total_point %>" aria-valuemin="0" aria-valuemax="100">
        </div>
      </div>
    </div>
  </section>
</section>
<section id="userContent" class="container-fluid h-100 d-flex page-content flex-column bg-white">
  <div id="myTodo" class="row ">
    <div class="col-12 mt-0">
      <p class="h4 mb-3">TODO</p>
      <%# TODO LIST%>
      <ul id="toDo" class="d-flex flex-column-reverse todo-list list-group mt-3">
        <%# ITEMS %>
        <%#  Faire un Each pour display les taches et generer la li suivante %>
        <!-- Mettre le form ici-->
        <%# Rajouter un message si tt les challenges du jours sont done   %>
          <% @party_challenges.each do |pc| %>
            <% if  (pc.updated_at.day != Time.now.day) || (pc.created_at.day == Time.now.day and pc.position == 0) %>
            <div class="list-group-item d-flex justify-content-between align-items-center border-0">
            <div class="d-flex flex-row align-items-center">
              <%= button_to "Check", party_challenge_path(pc.id), method: :patch, class: "btn btn-primary btn-block" %>
              <p class="pl-2 m-0"><%= pc.challenge.title %></p></div>

              <small><%= pc.position %> / <%= pc.challenge.step_number %></small>
            </div>
            <% end %>
          <% end %>

      </ul>
    </div>
  </div>
  <div id="myChallenges" class="row">
    <div id="partyChallenges" class="container-fluid d-flex page-content flex-column bg-white">
      <div class="row">
        <div class="col-12  col-md-12 col-lg-8 offset-lg-2">
          <p class="h4 mb-3">My Challenges</p>
          <% @party_challenges.each do |pc| %>
            <div class="blog-slider mb-5">
              <div class="blog-slider__wrp swiper-wrapper">
                <div class="blog-slider__item swiper-slide">
                  <div class="blog-slider__img">
                    <%= cl_image_tag pc.challenge.category.photo %>
                  </div>
                  <div class="blog-slider__content">
                    <span class="blog-slider__code"><%= pc.challenge.duration %> jours</span>
                    <div class="blog-slider__title"><%= pc.challenge.title %></div>
                    <div class="blog-slider__text">
                      <%= pc.challenge.description %>
                      <%= pc.point %>
                    </div>
                    <%= link_to "Details", challenge_path(pc), class: "blog-slider__button" %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
      <%#  Rajouter mon challenge en cours ici %>
      <small>View All</small>
    </div>
    <%# Je place mes challenges %>
  </div>
</section>
