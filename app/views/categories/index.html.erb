<section id="categoriesIndex" class="container-fluid d-flex flex-column bg-dark">
<%= render 'shared/topnav' %>
  <section id="categoriesTitle" class="row px-4 my-auto">
    <div class="search-bar col-12 offset-1 text-center">
      <form action="/" method="get" class="search">
        <input id="search" name="search" type="text" required />
        <button class="exit" type="reset">
      </form>
    </div>
  </section>
</section>
<section id="categoriesContent" class="container-fluid h-100 d-flex page-content flex-column bg-white">
<div class="row m">
  <% unless params[:search].present? %>
    <div class="col-12">
      <%= link_to challenges_path, class: "div-button" do %>
        <h1 class=" m-0 p-0">Challenges</h1>
      <% end %>
    </div>
    <div class="col-12">
      <%= link_to new_answer_path, class: "div-button" do %>
        <h1 class=" m-0 p-0">Quiz</h1>
      <% end %>
    </div>
  <% end %>
</div>
  <% if @tips.nil? != true %>
    <% if @tips.count > 0 %>
      <div class="search-result">
        <div class="col-12 d-flex align-items-center justify-content-between ">
          <p class="h4">Tips</p>
        </div>
        <% @tips.each do |tip| %>
          <div class="card w-100 my-2">
            <div class="card-body mb-2">
              <div class="voteForTip  d-flex justify-content-end">
                  <%= button_to tip_votes_path(tip), method: :post, class: "like-btn" do %>
                    <i class="fa<%= tip.votes.present? ? "s" : "r" %> fa-heart"></i>
                  <% end %>
              </div>
                <h5 class="card-title"><%= tip.title %></h5>
                  <h6 class="card-subtitle mb-2 text-muted"><small>Posted by: <%= tip.user.username %></small></h6>
                  <p class="card-text"><%= tip.description %></p>
              <div class="bottom-tip-card d-flex justify-content-space-around align-items-center">
                <span><%= pluralize(tip.votes.count, 'likes') %></span>
                  <% if tip.user == current_user %>
                    <%= button_to tip_path(tip), method: :delete, class: "like-btn" do%>
                      <i class='fas fa-trash-alt'></i>
                    <% end %>
                  <% end %>
              </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>

<% if @challenges.nil? != true %>
  <% if @challenges.count > 0 %>
  <div class="col-12 d-flex align-items-center mt-5 justify-content-between ">
    <p class="h4">Challenges</p>
    </div>
    <div id="challengesContentSearch" class="row mt-2">
    <% @challenges.each do |challenge| %>
      <div class="col-12 mb-2">
        <%= link_to challenge_path(challenge) do %>
          <div class="category">
            <h3><%= challenge.title %></h3>
             <%= challenge.description %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <% end %>
<% end %>

<% if @categories.count > 0 %>
  <div class="row">
    <div class="col-12 d-flex p-3 mt-n2 align-items-center justify-content-between ">
      <p class="h4">Categories</p>
    </div>
    <div class="col-12">
      <div class="card-columns">
        <% @categories.each do |category| %>
          <%= link_to category_path(category) do %>
            <div class="card-homepage">
              <%= image_tag(category.photo, class: "card-img") %>
              <div class="title">
                <h3><%= category.name %></h3>
              </div>
              <div class="info">
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
</section>
